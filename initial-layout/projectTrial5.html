<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Study Area Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .content-box {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 20px;
    }
    .top-nav .nav-link {
      color: #333;
      font-weight: 500;
      border-bottom: 3px solid transparent;
    }
    .top-nav .nav-link.active {
      border-color: #007bff;
      color: #007bff;
    }
    .nav-tabs .nav-link.active {
      background-color: #e9ecef;
      border-color: #dee2e6 #dee2e6 #fff;
    }
    .nav-pills .nav-link.active {
      background-color: #007bff;
      color: white;
    }
  </style>
</head>
<body class="bg-light">

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm px-4">
    <div class="container-fluid d-flex justify-content-between align-items-center">
  
      <!-- Logo -->
      <div class="d-flex align-items-center">
        <img src="C:\Users\ilakk\OneDrive\Desktop\UWA UNITS\agile web dev\Group project\Images\icon.png" alt="Logo" width="30" height="30" class="me-2">
        <span class="fw-bold fs-5">Alchieve</span>
      </div>
  
      <!-- Center Nav Links -->
      <ul class="navbar-nav mx-auto mb-2 mb-lg-0 d-flex flex-row gap-4">
        <li class="nav-item"><a class="nav-link" href="#">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link active text-primary" href="#">Study Log</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Rest Log</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Forecaster</a></li>
      </ul>
  
      <!-- Right Icons -->
      <div class="d-flex gap-3">
        <img src="C:\Users\ilakk\OneDrive\Desktop\UWA UNITS\agile web dev\Group project\Images\image (1).png" alt="Profile" width="28" height="28">
        <img src="C:\Users\ilakk\OneDrive\Desktop\UWA UNITS\agile web dev\Group project\Images\logout.png" alt="Logout" width="30" height="28">
      </div>
    </div>
</nav>
  

<!-- Tabs -->
<div class="container mt-5">
  <ul class="nav nav-tabs" id="mainTabs">
    <li class="nav-item">
      <button class="nav-link active" onclick="switchMainTab('progress')">Study Log</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" onclick="switchMainTab('achievements')">Achievements</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" onclick="switchMainTab('subjects')">Subjects</button>
    </li>
  </ul>

  <!-- Subjects Subtabs -->
  <div id="subjects-subtabs" class="my-3 d-none">
    <ul class="nav nav-pills">
      <li class="nav-item">
        <button class="nav-link active" id="subjects-btn" onclick="setSubjectsSubtab('subjects')">Units</button>
      </li>
      <li class="nav-item">
        <button class="nav-link" id="projects-btn" onclick="setSubjectsSubtab('projects')">Projects</button>
      </li>
    </ul>
  </div>

  <!-- Table Controls -->
  <div class="my-3 d-flex justify-content-end gap-2">
    <button class="btn btn-success" onclick="addRow()">Add Row</button>
    <button class="btn btn-danger" onclick="deleteRow()">Delete Row</button>
  </div>

  <!-- Table Container -->
  <div class="content-box">
    <table class="table table-bordered" id="dynamicTable">
      <thead id="tableHead"></thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const tableConfigs = {
    "progress": ["Log Date", "Subject Code", "Start Time", "End Time", "Total Time", "Productivity Score", "Distracted time", "Goal Content", "Covered Content"],
    "achievements": ["Date", "Type", "Subject Code", "Grade", "Percentage"],
    "subjects": [ "Semester", "Subject Code", "Subject Name", "Total Content", "Start Date", "End Date", "Mid-Sem Date", "Final Date"],
    "projects": [ "Semester", "Subject Code", "Project details", "Progress", "Start Date", "Submission Date"]
  };

  const sampleData = {
    "progress": [["26-Feb-25", "CITS3403", "9am", "11am", "2 hours", "5", "15 mins", "lecture content", "half of goal"]],
    "achievements": [["14-Jun-25", "Project", "CITS3403", "80", "80%"]],
    "subjects": [["4", "CITS3403", "Agile Web Development", "12", "26-Feb-25", "14-Jun-25", "4-Apr-25", "4-Jun-25"]],
    "projects": [["4", "CITS3403", "Data analytics and Web Development", "50%", "14-Apr-25", "18-May-25"]]
  };

  let activeTab = "progress";
  let subjectsSubtab = "subjects";

  function generateTable(tabKey) {
    const columns = tableConfigs[tabKey];
    const data = sampleData[tabKey] || [];

    const thead = document.getElementById("tableHead");
    const tbody = document.getElementById("tableBody");

    thead.innerHTML = `<tr><th>Select</th>${columns.map(col => `<th>${col}</th>`).join("")}</tr>`;
    tbody.innerHTML = "";

    data.forEach(rowData => {
      const row = document.createElement("tr");
      row.innerHTML = `<td><input type="checkbox"></td>` +
                      rowData.map(cell => `<td contenteditable="true">${cell}</td>`).join("");
      tbody.appendChild(row);
    });

    // Add a blank editable row
    const blankRow = document.createElement("tr");
    blankRow.innerHTML = `<td><input type="checkbox"></td>` +
                         columns.map(() => `<td contenteditable="true"></td>`).join("");
    tbody.appendChild(blankRow);
  }

  function switchMainTab(tab) {
    activeTab = tab;

    // Update nav tab highlight
    document.querySelectorAll("#mainTabs .nav-link").forEach(btn => btn.classList.remove("active"));
    const tabIndex = { progress: 0, achievements: 1, subjects: 2 }[tab];
    document.querySelectorAll("#mainTabs .nav-link")[tabIndex].classList.add("active");

    // Show or hide Subjects subtabs
    const subtabDiv = document.getElementById("subjects-subtabs");
    subtabDiv.classList.toggle("d-none", tab !== "subjects");

    // Load correct table
    const tableKey = (tab === "subjects") ? subjectsSubtab : tab;
    generateTable(tableKey);
  }

  function setSubjectsSubtab(key) {
    subjectsSubtab = key;

    document.getElementById("subjects-btn").classList.toggle("active", key === "subjects");
    document.getElementById("projects-btn").classList.toggle("active", key === "projects");

    if (activeTab === "subjects") {
      generateTable(key);
    }
  }

  function addRow() {
    const tableBody = document.getElementById("tableBody");
    const columns = tableConfigs[(activeTab === "subjects") ? subjectsSubtab : activeTab];

    const row = document.createElement("tr");
    row.innerHTML = `<td><input type='checkbox' /></td>` +
                    columns.map(() => `<td contenteditable='true'></td>`).join("");
    tableBody.appendChild(row);
  }

  function deleteRow() {
    const tableBody = document.getElementById("tableBody");
    [...tableBody.rows].forEach(row => {
      if (row.querySelector("input[type='checkbox']")?.checked) {
        row.remove();
      }
    });
  }

  // On first load, show Study Log
  window.onload = () => {
    switchMainTab("progress");
  };
</script>
</body>
</html>
